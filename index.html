<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Consulta Equipos por Bodega</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f4f4f4;
    }
    form {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 600px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 15px;
    }
    select, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      font-size: 16px;
    }
    #resultados-filtrados {
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <form id="miFormulario">
    <h2>Consulta Equipos por Bodega</h2>

    <label for="bodega">Bodega TI</label>
    <select id="bodega" name="bodega" required></select>

    <button type="submit">Consultar</button>
  </form>

  <div id="resultados-filtrados"></div>

  <script>
    const bodegas = [
      "BODEGA DE TI ARMENIA BANCOLOMBIA",
      "BODEGA DE TI COB NIQUIA BANCOLOMBIA",
      "BODEGA DE TI ED. CIUDAD DEL RIO MEDELLIN BANCOLOMBIA",
      "BODEGA DE TI ED. TORRE ORIENTE MEDELLIN BANCOLOMBIA",
      "BODEGA DE TI FLORENCIA BANCOLOMBIA",
      "BODEGA DE TI GESTION CENTRO LOGISTICO CALI BANCOLOMBIA",
      "BODEGA DE TI GESTION NIQUIA BANCOLOMBIA",
      "BODEGA DE TI NUEVA SEDE MEDELLIN BANCOLOMBIA",
      "BODEGA DE TI NUEVA SEDE MMC MEDELLIN BANCOLOMBIA",
      "BODEGA DE TI POPAYAN BANCOLOMBIA",
      "BODEGA DE TI RIONEGRO BANCOLOMBIA",
      "BODEGA DE TI RYG LOGISTICA MEDELLIN BANCOLOMBIA",
      "BODEGA DE TI SAN ANDRES ISLAS BANCOLOMBIA",
      "BODEGA DE TI SEDE NORTE BOGOTA BANCOLOMBIA",
      "BODEGA DE TI SEDE PRINCIPAL BOGOTA BANCOLOMBIA",
      "BODEGA DE TI STC MEDELLIN LOGISTICA BANCOLOMBIA",
      "BODEGA DE TI TULUA BANCOLOMBIA",
      "BODEGA DE TI VILLAVICENCIO BANCOLOMBIA",
      "BODEGA DE TI YOPAL BANCOLOMBIA",
      "BODEGA DE TI APARTADO BANCOLOMBIA",
      "BODEGA DE TI BARRANQUILLA BANCOLOMBIA",
      "BODEGA DE TI BUCARAMANGA BANCOLOMBIA",
      "BODEGA DE TI CALI BANCOLOMBIA",
      "BODEGA DE TI CARTAGENA BANCOLOMBIA",
      "BODEGA DE TI CUCUTA BANCOLOMBIA",
      "BODEGA DE TI ED. GRANADA CALI BANCOLOMBIA",
      "BODEGA DE TI GIRARDOT BANCOLOMBIA",
      "BODEGA DE TI IBAGUE BANCOLOMBIA",
      "BODEGA DE TI MANIZALES BANCOLOMBIA",
      "BODEGA DE TI MONTERIA BANCOLOMBIA",
      "BODEGA DE TI NEIVA BANCOLOMBIA",
      "BODEGA DE TI PASTO BANCOLOMBIA",
      "BODEGA DE TI PEREIRA BANCOLOMBIA",
      "BODEGA DE TI SANTA MARTA BANCOLOMBIA",
      "BODEGA DE TI SINCELEJO BANCOLOMBIA",
      "BODEGA DE TI TUNJA BANCOLOMBIA",
      "BODEGA DE TI VALLEDUPAR BANCOLOMBIA"
    ];

    const bodegaSelect = document.getElementById("bodega");
    bodegas.forEach(nombre => {
      const option = document.createElement("option");
      option.value = nombre;
      option.textContent = nombre;
      bodegaSelect.appendChild(option);
    });

    document.getElementById('miFormulario').addEventListener('submit', async function (e) {
      e.preventDefault();

      const data = {
        bodega: document.getElementById('bodega').value
      };

      try {
        const res = await fetch('https://prod-08.southamerica.logic.azure.com:443/...TU-FLUJO...', {
          method: 'POST',
          body: JSON.stringify(data),
          headers: {
            'Content-Type': 'application/json'
          }
        });

        if (!res.ok) throw new Error('Error al enviar los datos.');

        const resultadoFiltrado = await res.json();
        const contenedor = document.getElementById("resultados-filtrados");
        contenedor.innerHTML = "";

        if (resultadoFiltrado.length === 0) {
          contenedor.innerHTML = "<p>No se encontraron registros para esa bodega.</p>";
        } else {
          resultadoFiltrado.forEach(item => {
            const div = document.createElement("div");
            div.style.marginBottom = "10px";
            div.style.padding = "10px";
            div.style.border = "1px solid #ccc";
            div.style.borderRadius = "8px";
            div.innerHTML = `
              <strong>Clase:</strong> ${item.clase}<br>
              <strong>Placa:</strong> ${item.placa}<br>
              <strong>Serial:</strong> ${item.serial}<br>
              <strong>Marca:</strong> ${item.marca}<br>
              <strong>Modelo:</strong> ${item.modelo}<br>
              <hr>
            `;
            contenedor.appendChild(div);
          });
        }
      } catch (err) {
        alert("Hubo un error al consultar el flujo: " + err.message);
      }
    });
  </script>
</body>
</html>
